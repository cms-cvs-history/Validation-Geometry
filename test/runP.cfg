process PROD  = 
{
   
   service = MessageLogger
   {
      untracked vstring destinations = {"cout"}
      # vstring categories = { "FwkJob" } 
      PSet cout =
      {
         PSet default = { int32 limit = 0 }
         # PSet FwkJob   = { int32 limit = -1 } # but FwkJob category - those unlimitted
      }
   }
    
   service = Timing {}
 
   #The module which reade from a HepMC ASCII file
   #
   source = MCFileSource
   {
      # The HepMC test File
      untracked vstring fileNames = {"file:single_muon.random.dat"}
      untracked int32 maxEvents = 1000
   }		
		
   #Geometry
   #
   include "Geometry/CMSCommonData/data/cmsSimIdealGeometryXML.cfi"
   es_module = TrackerGeometricDetESModule {}

   #Magnetic Field
   #
   include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"

   # Output of events, etc...
   #
   # Explicit note : since some histos/tree might be dumped directly,
   #                 better NOT use PoolOutputModule !

   # Detector simulation (Geant4-based)
   #
   module SimG4Object = OscarProducer 
   { 
          bool NonBeamEvent = false
	  #
	  untracked int32 RunNumber = 1001
	  #
	  untracked int32 G4EventManagerVerbosity = 0
	  untracked int32 G4StackManagerVerbosity = 0
	  #
	  bool UseMagneticField = true
	  bool OverrideUserStackingAction = true
	  bool StoreRndmSeeds = false
	  bool RestoreRndmSeeds = false
	  #
	  # not sure if it should be (un)tracked ?
	  #
	  string PhysicsTablesDirectory = "PhysicsTables"
	  bool StorePhysicsTables = false
	  bool RestorePhysicsTables = false
	  #
	  PSet MagneticField = { double delta = 1. }
	  PSet Physics =
	  {
	       string type = "SimG4Core/Physics/DummyPhysics"
	       bool DummyEMPhysics = true
	       bool CutsPerRegion = true
	       double DefaultCutValue = 1000. # cuts in cm, i.e. 10m
	       untracked int32 Verbosity = 0  # 1 will print cuts as they get set from DD
					      # 2 will do as 1 + will dump Gean4 table of cuts
	  }
	  PSet Generator =
	  {
	       bool ApplyPtCuts = true
	       bool ApplyEtaCuts = true
	       bool ApplyPhiCuts = false
	       double MinPhiCut = 0.
	       double MaxPhiCut = 360.
	       double MinEtaCut = -5.5
	       double MaxEtaCut = 5.5
	       double MinPtCut = 40.
	       double MaxPtCut = 999999.
	       untracked int32 Verbosity = 0
	  }
	  PSet RunAction = { string StopFile = "StopRun" }
	  PSet EventAction =
	  {
	       bool CollapsePrimaryVertices = false
	       string StopFile = "StopRun"
	       untracked bool debug = false
	  }
	  PSet TrackingAction = { untracked bool DetailedTiming = false }
	  PSet UtilityActions =
	  {
	       string type = "SimG4Core/UtilityAction/TrackingVerboseAction"
	       untracked bool  DEBUG = false
	       untracked bool  CheckForHighEtPhotons = false
	       untracked int32 EventMin = 0
	       untracked int32 EventMax = 0
	       untracked int32 EventStep = 1
	       untracked int32 TrackMin = 0
	       untracked int32 TrackMax = 0
	       untracked int32 TrackStep = 1
	       untracked int32 VerboseLevel = 0 
	  }
	  PSet SteppingAction =
	  {
	       bool   KillBeamPipe = true
	       double CriticalEnergyForVacuum = 2.0
	       double CriticalDensity = 1.e-15
	       untracked int32  Verbosity = 0
	  }
	  PSet TrackerSD =
	  {
	       bool    ZeroEnergyLoss = false
	       bool    NeverAccumulate = false
	       bool    PrintHits = false
	       double  ElectronicSigmaInNanoSeconds = 12.06
	       double  EnergyThresholdForPersistencyInGeV = 0.5
	       double  EnergyThresholdForHistoryInGeV = 0.05
	  }
	  PSet MuonSD =
	  {
	       double  EnergyThresholdForPersistency = 1.0
	       bool    AllMuonsPersistent = false
	       bool    PrintHits = false
          }
	  PSet CaloSD = 
	  {
	       double EminTrack = 1.0
	       untracked int32  CheckHits = 25
	       untracked bool   UseMap = true
	       untracked int32 Verbosity = 0
	       untracked bool   DetailedTiming = false
	  }
	  PSet ECalSD = 
	  {
	       bool   UseBirkLaw = false
	       double BirkC1 = 0.013
	       double BirkC2 = 9.6e-6
	       #int32  Verbosity = 11
	       int32 Verbosity = 0
	  }
	  PSet HCalSD = 
	  {
	       bool   UseBirkLaw = false
	       double BirkC1 = 0.013
	       double BirkC2 = 9.6e-6
	       #int32  Verbosity = 111
	       int32 Verbosity = 0
	       bool   UseShowerLibrary = true
	       bool   TestNumberingScheme = false
	  }
	  PSet CaloTrkProcessing = 
	  {
	       #int32  Verbosity = 1
	       int32 Verbosity = 0
	       bool   TestBeam  = false
	       double EminTrack = 0.01
	  }
	  PSet HFShower =    
	  {
	       #int32  Verbosity = 11
	       int32 Verbosity = 0
	       double ProbMax   = 0.7268
	       double CFibre    = 0.50
	  }
	  PSet HFShowerLibrary = 
	  {
	       FileInPath FileName = "SimG4CMS/Calo/data/hfshowerlibrary_lhep.root"
	       string TreeEMID  = "h3"
	       string TreeHadID = "h8"
	  }
	  PSet HFCherenkov = 
	  {
	       #int32  Verbosity = 1
	       int32 Verbosity = 0
	       double RefIndex        = 1.459
	       double Lambda1         = 280.0
	       double Lambda2         = 700.0
	       double Aperture        = 0.33
	       double ApertureTrapped = 0.22
	       double Gain            = 0.33
	       bool   CheckSurvive    = false
	  }
          VPSet Watchers = {
             {   string type = "MaterialBudgetAction"
                 PSet MaterialBudgetAction = {
                    string HistosFile = "matbdg.root"
                    # string TextFile = "matbdg.txt"
	            string TextFile = "None"  # "None" means this option 
                    string TreeFile = "None"  # is NOT requested
                    bool AllStepsToTree = 0
                 }
              }
          }
 
   }
   
   path p1 = { SimG4Object }
}		
