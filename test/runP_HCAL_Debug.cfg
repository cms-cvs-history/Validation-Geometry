process PROD  = {
    
    service = RandomNumberGeneratorService {
        untracked uint32 sourceSeed = 135799753
        PSet moduleSeeds = {
            untracked uint32 g4SimHits = 9876
        }
    }

    service = MessageLogger {
	untracked vstring destinations = {"cout"}
	untracked vstring categories = { "MaterialBudget" } 
#	untracked vstring debugModules = { "*" }
#	untracked PSet cout = { untracked string threshold = "DEBUG"
	untracked PSet cout = {
	    untracked PSet default        = { untracked int32 limit = 0 }
	    untracked PSet MaterialBudget = { untracked int32 limit =-1 }
	}
    }
    
    #The module which reads from a HepMC ASCII file
    #
    include "SimGeneral/HepPDTESSource/data/pythiapdt.cfi"
    source = FlatRandomEGunSource {
            untracked uint32 firstRun  = 1
            untracked PSet PGunParameters = {
                    untracked vint32 PartID = {14}
                    untracked double MinEta =  1.13
                    untracked double MaxEta =  3.00
                    untracked double MinPhi = -3.14159265358979323846
                    untracked double MaxPhi =  3.14159265358979323846
                    untracked double MinE   =  9.99
                    untracked double MaxE   = 10.01
            }
            untracked int32 Verbosity = 0
            untracked bool  AddAntiParticle = false
    }
    untracked PSet maxEvents = {untracked int32 input = 100}
    
    #Geometry
    #
    include "Geometry/CMSCommonData/data/cmsIdealGeometryXML.cfi"
    include "Geometry/TrackerNumberingBuilder/data/trackerNumberingGeometry.cfi"
    
    #Magnetic Field
    #
    include "MagneticField/Engine/data/volumeBasedMagneticField.cfi"
    
    # Detector simulation (Geant4-based)
    #
    include "SimG4Core/Application/data/g4SimHits.cfi"
    replace g4SimHits.Generator.HepMCProductLabel = "source"
    replace g4SimHits.UseMagneticField = false
    replace g4SimHits.Physics.type = "SimG4Core/Physics/DummyPhysics"
    replace g4SimHits.Physics.DummyEMPhysics = true
    replace g4SimHits.Physics.CutsPerRegion = false
    replace g4SimHits.Watchers = { 
	{ string type = "MaterialBudgetHcal"
	    PSet MaterialBudgetHcal = {
		untracked double RMax      = 5.0
		untracked double ZMax      = 14.0
		untracked int32  NbinEta   = 260
		untracked int32  NbinPhi   = 180
		untracked double MaxEta    = 5.2
		untracked double etaLow    =-3.0
		untracked double etaHigh   = 3.0
	    }
	}
    }

    service = TFileService {
        string fileName = "matbdg_HCAL1.root"
    }
    
    path p1 = { g4SimHits }
}		
